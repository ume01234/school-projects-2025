# AI God - Mandala (Eye + Lotus)

「ミャクミャク」を想起させる青い瞳孔の“目”と、緑／ピンク基調の“蓮華”を組み合わせたジェネラティブアート。  
鑑賞者との距離に応じて **FAR / MIDDLE / NEAR** の3状態を持つ体験型作品へ拡張中。

## 現状（デモ版）
- 表示対象: FAR状態のみで「目＋蓮華」を1体描画。MIDDLE/NEARは赤い背景のみ表示（仕様上意図的に非表示）。
- 距離入力: **ダミーのサイン波 (0〜1)** を使い、状態遷移をデモ。実センサーは未接続。
- 色: 背景はミャクミャクを連想させる赤 (`#CC0000`)、瞳孔は青 (`#0066DD`)。蓮華は緑系 / ピンク系の2系統がランダムに選択。
- デバッグ: 画面左上に距離と状態を表示（`DEBUG_OVERLAY`でON/OFF）。

## 作品の方向性（完成イメージ）
1. 鑑賞者の距離をトリガーに **FAR / MIDDLE / NEAR** の三態が遷移する体験設計  
   - FAR: 現在の「目＋蓮華」が静かに浮遊（実装済み）  
   - MIDDLE: 今後実装（音・視覚ともに変化予定）  
   - NEAR: 今後実装（より強い反応・音響表現を想定）
2. 状態は「切り替え」ではなく体験の一部として設計（将来的に遷移アニメーションや遅延を追加できる構造を維持）
3. 目・蓮華モジュールは独立ファイルで編集しやすく、表示上は常に「一体の存在」として扱う

## 今後実装する内容（メモ）
- カメラ／センサー入力による実距離の取得と正規化（0〜1など）  
  - 判定ロジックは `getStateFromDistance()` に集約済み。ダミー距離を差し替えるだけで導入可能。
- MIDDLE / NEAR の視覚表現・音響表現を追加  
  - 遷移アニメーションや遅延を入れられるよう、`currentState` と `targetState` を保持済み。
- 最終展示用にデバッグ表示を無効化（`DEBUG_OVERLAY = false`）し、音響を統合

## 技術スタック
- **p5.js**（WEBGL使用は目のシェーダー用グラフィックス内）  
- **JavaScript / HTML / CSS**

## 主要モジュール
- `eye/eye.js` : 目のシェーダー描画（青い瞳孔、放射状の虹彩）  
- `eye/flower.js` + `eye/petal.js` : 蓮華の生成（緑系 / ピンク系）  
- `eye/eyeFlower.js` : 目＋蓮華を統合しテクスチャ合成するモジュール  
- `eye/main.js` : 状態管理と描画。FARでのみオブジェクトを描画。距離デモはサイン波。
- `eye/index.html` : デモ表示用エントリーポイント

## セットアップ（デモの見方）
1. VS Code / Cursor で `eye/index.html` を Live Server で開く  
2. ブラウザで赤い背景上に「目＋蓮華」が周期的に現れたり消えたりする（距離ダミーのサイン波による状態遷移）  
3. 状態と距離のデバッグ表示を消したい場合は `eye/main.js` の `DEBUG_OVERLAY` を `false` に設定

## リポジトリ構成（抜粋）
```
assets/           # 音や画像アセット
eye/              # 現行デモとモジュール
  ├─ index.html   # デモ用エントリーポイント
  ├─ main.js      # 状態管理と描画（デモ用サイン波距離）
  ├─ eyeFlower.js # 目＋蓮華の統合
  ├─ eye.js       # 目（シェーダー含む）
  ├─ flower.js    # 花
  └─ petal.js     # 花びら
not-used/         # 旧構成（現状未使用。index.html, style.css, js/, ref/ など）
README.md         # 本ファイル
caption.md        # 作品キャプション
```

## デバッグメモ
- 距離ダミー: `mockDistance = map(sin(frameCount * 0.01), -1, 1, 0, 1);`
- 状態判定: `getStateFromDistance()` に集約（閾値 `THRESH_NEAR`, `THRESH_MIDDLE`）
- 表示: FARのみ描画、MIDDLE/NEARは赤背景のみ（仕様）

